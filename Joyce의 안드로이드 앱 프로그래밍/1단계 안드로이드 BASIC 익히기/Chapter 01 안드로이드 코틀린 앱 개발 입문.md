# Chapter 01 안드로이드 코틀린 앱 개발 입문

## 1.1 안드로이드와 코틀린

### 1.1.1 안드로이드

- 안드로이드는 구글이 만든 모바일 운영체제 (operating system)
- 리눅스 기반
    - 보통 리눅스는 서버나 데스크톱 운영체제로 쓰임
- 안드로이드는 모바일 운영체제를 염두에 두고 만들었음
- 2008년 9월 처음 1.0 버전 공개, 2021년 5월 12 버전 발표
- 2021년 12월 기준 모바일 시장의 70% 차지
- (장점) 오픈 소스
    - 누구든 코드를 볼 수 있고 접근 가능하기 때문에, 개발자나 단말기를 생산하는 사람들은 기기의 호환성에 맞게 다양한 변화를 줄 수 있음
    - 개발자들이 직접 오류를 발견하거나, 새로운 제안을 할 수 있음
    
    ⇒ 안드로이드 플랫폼은 끊임없이 변화하고 있음
    
</br></br>
### 1.1.2 코틀린

- 코틀린은 자바처럼 JVM (Java Virtual Machine) 에서 동작하는 프로그래밍 언어
- 비교적 최근에 만들어진 언어로서 다른 프로그래밍 언어에서 검증된 해법과 기능 포함
- 자바에서 발생하는 수많은 문제를 해결할 목적으로 만들어졌기 때문에 매우 실용적이고 간결
- 안드로이드 초기 : 자바로 앱 개발 → 2017년 코틀린이 구글 안드로이드 정식 언어로 지정된 후, 2019년 구글이 안드로이드 개발에서 ‘Kotlin First’를 표방하면서 메인 언어로 자리매김
- 코틀린의 특징
    - 간결함 : 기능이 다양한 표준 라이브러리를 제공해 상용구 코드를 적게 작성하면서도 아이디어를 풍부하게 표현 가능
    - 더 안전한 코드 : 널 포인터 예외 (null pointer exception) 와 같은 일반적인 프로그래밍 실수를 방지하는 다양한 장치 제공
    - 호환성 : 자바와 100% 호환되므로 자바로 작성된 코드도 자유롭게 사용 가능, 반대로 자바 환경에서도 코틀린을 아무 문제 없이 사용 가능
    - 구조화된 동시 실행 : 코틀린 코루틴을 사용하면 비동기 코드를 쉽게 사용 가능, 코루틴을 이용하면 네트워크 호출, 로컬 데이터 액세스에 이르는 백그라운드 작업을 효과적으로 간단히 구현하고 관리 가능
</br></br>

### 1.1.3 안드로이드 스튜디오

- 안드로이드 앱을 만드는 데 안드로이드 스튜디오 사용
- 안드로이드 스튜디오 = 안드로이드 앱 개발용 IDE (Integrated Development Environment)
- 스마트폰 뿐 아니라 스마트워치, 태블릿 등 모든 안드로이드 기기용 앱 개발 환경을 제공
- 에뮬레이터까지 제공해 코드가 제대로 동작하는지 쉽게 확인 가능
- 젯브레인스 (Jetbrains), 인텔리제이 (Intellij), 파이참 (Pycharm) 과 동일한 단축키 제공
</br></br></br></br>

## 1.2 앱 개발 과정 살펴보기

1. 기획&디자인
2. 앱 개발
3. 테스트
4. 배포 및 관리
</br></br>

### 1.2.1 기획&디자인 단계

- 앱의 구동 방식과 기능을 기획
- 와이어프레임으로 대략적인 구조도 그림
- 프로젝트의 전체 일정 계획
- 와이어프레임은 제품 구성을 시각적으로 묘사한 것, 와이어로 연결
- 와이어프레임 완료 후, 디자인
- 대체로 앱 디자인은 스케치 3 (Sketch 3), 피그마 (Figma), 어도비 XD (Adobe XD) 같은 도구를 사용해 디자이너가 디자인
</br></br>

### 1.2.2 앱 개발 단계

- 앱에 따라서 서버가 필요할 수도, 아닐 수도 있음
- 협업할 개발자와 일정을 맞추어 개발
- 어떤 디자인 패턴을 적용할지 등을 고민하고, 인고의 시간을 보내면서 앱을 만듬
</br></br>

### 1.2.3 테스트 단계

- 개발자가 직접 수행하는 단위 테스트와 QA (Quality Assurance) 엔지니어가 수행하는 기능성 테스트
- 개발자가 작성한 함수가 정상 작동하는지 확인하는 단위 테스트는 버그를 줄이고 코드의 품질을 높임
- QA 엔지니어는 다음과 같은 세 가지에 중점을 두어 테스트
    1. 기능적으로 잘 구현되었는가?
    2. UI/UX가 요구사항대로 표현되었는가?
    3. 성능이 적절한가? (화면 로딩 속소, 이미지/영상 등 콘텐츠 로딩 속도)
- 개발용 기기 이외의 다른 기기에서도 안정적으로 작동하는지 확인
</br></br>

### 1.2.4 배포 및 관리 단계

- 만든 앱을 bundle 혹은 apk 파일로 만들어서 모든 사람이 사용할 수 있도록 마켓에 올리는 과정
- 마켓에 제출한 앱이 구글의 승인을 얻어 공개되기까지는 일주일 정도 소요
- 업로드 후에도 앱 업데이트 가능
</br></br>

### 1.2.5 실무

- 실무에서는 앞서 다룬 일련의 과정이 병렬적이고 반복적으로 일어남
- 아무리 앱을 잘 만들더라도, 버그는 항상 존재하기 마련
- 버그에 빠르게 대처하고 추가 기능이 기존 기능과 충돌하지 않는지 면밀히 테스트하는 것 = 개발자에게 중요한 자질
</br></br></br></br>

## 1.3 프로젝트 생성 방법

(생략)
</br></br></br></br>

## 1.4 프로젝트 구조 알아보기

- 프로젝트 생성 후 보이는 화면
    1. 프로젝트 구조를 보여주는 창
    2. 코드를 수정할 수 있는 코드 편집창
    3. 앱 실행 시 관련 로그를 확인하는 창
- 프로젝트
    1. [app] : 코드 파일
    2. [Gradle Scripts] : 앱을 만드는 데 필요한 옵션과 라이브러리 정보
</br></br>

### 1.4.1 [app] 폴더 알아보기

- [app] 폴더
    1. [manifests] 폴더
        - AndroidManifest.xml : 앱과 관련된 기본적인 설정 담겨 있음, 앱의 패키지 이름, 앱 구성요소(액티비티, 서비스, 콘텐츠 제공자, 브로드캐스트 리시버 등), 권한 정의
    2. [java] 폴더
        - 자바 파일과 코틀린 파일이 있는 폴더
        - 앱의 로직을 담당하는 부분
        - MainActivity.kt : 메인 액티비티(메인 화면)의 동작을 정의한 코드를 작성
    3. [res] 폴더
        - res = resource (자원)
        - 앱에서 사용하는 이미지, 레이아웃, 색상 값과 같은 자원을 모아놓은 곳
        - [drawable] 폴더 : 앱에서 사용할 이미지 파일, 기본 xml 파일 두 개 = 코드로 작성된 런처(앱 아이콘) 벡터 이미지
        - [layout] 폴더 : 액티비티나 프래그먼트와 같이 화면에 보여줄 구성요소들의 레이아웃(배치)를 XML 파일로 정의
        - [mipmap] 폴더 : 런처에 등록할 이미지, 런처 = 앱을 실행할 때 누르는 아이콘 같은 것
        - [values] 폴더 : 생상이나 문자열과 같은 값 (value) 들을 지정해 놓는 곳
  </br></br>  

### 1.4.2 Gradle Scripts 알아보기

- 그레이들(Gradle) : 소스 코드를 컴파일하고 apk 파일로 패키징하는 빌드 과정을 해 줌
⇒ 빌드 시스템, 복잡한 빌드 프로세스를 자동화해 주는 도구
- [Gradle Scripts] 폴더 : 빌드에 사용할 파일이 들어있음
- 외부 라이브러리를 추가하고 싶으면 파일을 수정해야 함
- build.gradle (Project: HelloWorld) / build.gradle (Module: HelloWorld.app)
    - 모듈 : 하나의 프로젝트를 구성하는 블록과 같은 단위
        - 보통 app 모듈 하나만 존재, 프로젝트에 따라서 모듈이 여러 개일 수도 있음
    - 프로젝트 : 여러 모듈을 묶어서 하나로 관리하는 개념
- build.gradle (Project: HelloWorld) : 프로젝트 수준에서 모든 모듈에 영향을 끼치는 설정
- build.gradle (Module: HelloWorld.app) : 해당 모듈에만 영향을 끼치는 설정
- Gradle Scripts = 프로젝트 단위와 모듈 단위에서 빌드 속성을 정의하는 곳
</br></br>

**build.gradle (Project: Hello World)**

1. buildscript : 프로젝트를 빌드할 때 필요한 설정
2. repositories : 빌드에 필요한 의존성을 어디에서 가져올지
3. dependencies : 어떤 Gradle 버전을 슬지 명시
4. task clean( ) : 새로 빌드할 때 기존 파일을 어떻게 할지 결정, 현재는 파일들을 삭제하고 다시 빌드하도록 설정됨
</br></br>

**build.gradle (Module: HelloWorld.app)**

1. plugins : 해당 모듈을 빌드하는 필수 플러그인
2. compileSdk : 모듈을 컴파일하는 API 레벨
3. defaultConfig : 빌드 타입과 무관하게 적용되는 속성을 정의
4. buildTypes : 빌드 타입에 따른 속성 추가 가능, 빌드 타입에는 크게 release와 debug가 있음
5. compileOptions, kotlinOptions : 컴파일이나 코틀린과 관련된 속성 추가 가능
6. dependencies : 모듈의 의존성을 추가하는 부분, 외부 바이너리 또는 라이브러리 모듈을 빌드에 포함시켜 프로젝트에서 사용 가능
→ 이 프로젝트가 외부 라이브러리에 기능적으로 ‘의존’하게 되므로 의존성이라고 말함
</br></br></br></br>

## 1.5 HelloWorld 앱 만들기

- 코틀린 코드 파일 (.kt) : 앱의 동작 담당
- XML 파일 (.xml) : 앱의 화면 구성 담당
- 항상 두 파일이 한 쌍으로 사용됨, 하나만 있어서는 제 기능을 할 수 없음
</br></br>

### 1.5.1 MainActivity.kt 코드 파일 알아보기

- MainActivity.kt 파일 : 메인 액티비티의 동작 코드를 작성하는 파일
- package ~~
    - MainActivity.kt 파일이 어느 패키지에 속하는지 알려줌
    - 점 . 기호를 사용해 패키지의 계층 구조를 표현
    - 나중에 수정할 수 있음
- import ~~
    - 해당 .kt 파일이 담긴 패키지 밖에 구현된 객체 (라이브러리나 모듈) 를 임포트하는 구문
    - 임포트 : 쓸 수 있게 가져옴
    - 명령어 : import
- class MainActivity : ~~
    - MainActivity 클래스 : AppCompatActivity 클래스를 상속받는 클래스
    - AppCompatActivity 클래스 : Activity 클래스를 상속받는 클래스
    - AppCompatActivity 클래스 : 오래된 안드로이드 버전과 호환성을 유지하고 새로운 기능이 추가된 액티비티 클래스
    - 안드로이드 스튜디오 1.5 버전부터는 새로 생성하는 모든 액티비티 클래스가 기본적으노 AppCompatActivity 클래스를 상속받음
- override fun onCreate ~~
    - 클래스가 생성될 때 맨 처음 호출되는 콜백 함수
    ( 콜백 함수 : 이벤트가 발생했더나 특정 시점에 도달했을 때 실행되는 함수, 개발자가 명시적으로 호출하지 않고, 단지 함수만 구현하면 됨 )
    - 여기에 초기화 코드를 넣으면 됨
    - 매개변수인 savedInstanceState: Bundle? : 특정한 상황에서 액티비티가 저장한 값을 다시 불러오는 값
- super.onCreate ~~
    - super : 상위 클래스
    - 상위 클래스의 onCreate( ) 를 먼저 실행하라는 의미
    - 없으면, SuperNotCalledException 에러 발생
- setContentView ~~
    - 보여줄 레이아웃 지정
    - R : 자동 생성된 클래스, 모든 리소스 (레이아웃, 이미지, 문자열 등) 를 식별할 수 있는 변수가 정의된 클래스
</br></br>

**R**
- 자동 생성된 클래스로서 어디서나 접근할 수 있는 상수들로 구성됨
- res(리소스) 폴더에 정의한 여러 값을 프로젝트에서 사용할 수 있음
- R . (리소스 종류)
</br></br>

### 1.5.2 레이아웃 파일 보는 방법

- 레이아웃 에디터 모드
    - [Code]  : 코드만
    - [Split] : 코드와 디자인 모두
    - [Design] : 디자인된 화면
</br></br>

### 1.5.3 레이아웃 수정해보기

(생략)
</br></br>

### 1.5.4 android:exported 확인

- exported 속성 : 앱에서 만든 액티비티, 서비스와 같은 컴포넌트들이 외부 앱에 의해 실행될 수 있는지를 정의하는 데 쓰임
- 핵심 : ‘다른 앱과 상호작용이 필요한가’
- API 버전 30까지는 기본값 true, 공개하고 싶지 않은 경우에만 false 명시
- 현재는 직접 명시 → 안 하면 에러
- 최신 버전이라면 exported 속성이 액티비티가 생성될 때 자동으로 추가됨
- To do
    - exproted 속성은 AcdroidManifest.xml 파일에서 수정 가능
    - activity 태그 안 속성을 android:exported=”true”로 지정
</br></br></br></br>

## 1.6 에뮬레이터 실행하기

- 에뮬레이터 : 가상 단말 (Android Virtual Device) 로써 실제 안드로이드 기기가 없더라도 얼마든 개발이 가능하게끔 해 주는 도구
- 여러 해상도와 API 레벨을 설정하여 테스트할 수 있어 실제로 가지고 있지 않은 기기에서도 테스트 가능
</br></br></br></br>

## 1.7 실제 기기로 실행하기

### 1.7.1 기기를 개발용으로 설정하기

1. [설정] > ‘빌드 번호’ 검색 > [빌드 번호]
2. [빌드 번호] 여러 번 터치 (’개발자 모드를 켰습니다.’ 팝업 뜰 때까지)
3. [설정] > ‘개발자 옵션’ 검색 > [개발자 옵션]
4. [USB 디버깅] 켜기 (’USB 디버깅을 허용하시겠습니까?’ 팝업 뜨면 확인)
5. 컴퓨터 시스템 설정 > “[제조사] USB 드라이버 설치”
</br></br></br></br>

## 핵심 요약

1. 안드로이드는 구글이 만든 오픈 소스 모바일 운영체제
2. 코틀린은 자바처럼 JVM에서 동작하는 프로그래밍 언어로서 간결성, 안전성, 호환성이 뛰어나 안드로이드 개발에 용이
3. 앱이 배포되기까지는 기획, 디자인, 개발 및 테스트 과정 거침
4. [manifests] 는 앱의 패키지 이름과, 앱의 구성요소, 권한 등이 정리된 폴더
5. [java] 는 앱의 작동 로직인 자바와 코틀린 파일을 모아놓은 폴더
6. [res] 는 앱 내에서 쓰이는 이미지, 레이아웃, 색상 값과 같은 자원들을 모아놓은 폴더
7. [Gradle Scripts] 는 프로젝트 단위, 모듈 단위에서 여러 빌드 속성을 정의하는 폴더